{{ define "main" }}
<div class="terminal-window" style="padding: 20px; border: 1px solid #333; background: rgba(0,0,0,0.5); margin-bottom: 20px;">
    <div class="terminal-feed" style="text-align: left !important; display: block !important;">
        
        {{/* SYSTEM INTRODUCTION BLOCK: BAT STYLE */}}
        <div id="system-intro" style="font-family: 'Courier New', monospace; margin-bottom: 50px; background: rgba(0,0,0,0.2); padding: 15px; border-left: 2px solid #00ff41;">
            <div style="margin-bottom: 10px;">
                <span style="color: #00ff41; font-weight: bold;">xoce</span><span style="color: #666;">@</span><span style="color: #ff3e3e; font-weight: bold;">darkarch</span>
                <span style="color: #ffffff;">:~#</span> <span style="color: #00e5ff;">bat intro.txt</span>
            </div>

            <div style="display: grid; grid-template-columns: 35px 1fr; gap: 15px; border-top: 1px solid #333; border-bottom: 1px solid #333; padding: 12px 0; background: rgba(0, 229, 255, 0.03);">
                {{/* LINE NUMBERS */}}
                <div style="color: #444; text-align: right; user-select: none; border-right: 1px solid #333; padding-right: 10px;">
                    1<br>2<br>3<br>4
                </div>
                {{/* CONTENT WITH COLORFUL HIGHLIGHTING */}}
                <div style="color: #00e5ff;">
                    <span style="color: #ffffff;">[!]</span> <span style="color: #00ff41;">GHOST-HYDRA:</span> Offensive R&D and Adversary Emulation Archive.<br>
                    <span style="color: #ffffff;">[!]</span> <span style="color: #00ff41;">MISSION:</span> Bridging deep-tier exploitation and strategic defense.<br>
                    <span style="color: #ffffff;">[!]</span> <span style="color: #00ff41;">SCOPE:</span> Zero-Trust, Cloud-Native Infiltration, and Custom C2.<br>
                    <span style="color: #ffffff;">[!]</span> <span style="color: #00ff41;">STATUS:</span> <span style="background: #00ff41; color: #000; padding: 0 4px; font-weight: bold;">ACTIVE_TRANSMISSION</span>
                </div>
            </div>

            <div style="margin-top: 10px;">
                <span style="color: #00ff41; font-weight: bold;">xoce</span><span style="color: #666;">@</span><span style="color: #ff3e3e; font-weight: bold;">darkarch</span>
                <span style="color: #ffffff;">:~#</span> <span class="cursor" style="color: #00ff41; font-weight: bold;">_</span>
            </div>
        </div>

        <div class="posts-list">
            {{ range .Paginator.Pages }}
                {{ partial "feed_item.html" . }}
            {{ end }}
        </div>

        <div style="border-bottom: 1px dashed rgba(255, 62, 62, 0.2); width: 100%; margin: 50px 0;"></div>

        <div class="bottom-system-section">
            <div style="color: #ff3e3e; text-shadow: 0 0 5px #8a0303; font-family: 'Courier New', monospace; margin-bottom: 15px; font-weight: bold;">
                <p style="margin: 0;"><span style="color: #00ff41;">xoce</span><span style="color: #666;">@</span><span style="color: #ff3e3e;">darkarch</span><span style="color: #ffffff;">:~$</span> ls -la /var/log/intel/internal_feed</p>
                <p style="margin: 0;">total {{ len .Site.RegularPages }} objects detected</p>
            </div>
            <div id="active-log-monitor" style="border: 1px solid #ff3e3e; background: rgba(10, 0, 0, 0.95); box-shadow: 0 0 15px rgba(138, 3, 3, 0.2);">
                <div style="background: rgba(255, 62, 62, 0.15); padding: 8px 15px; font-family: monospace; color: #ff3e3e; font-size: 0.8rem; border-bottom: 1px solid #ff3e3e;">
                    LIVE_LOG_STREAM: /var/log/ghost-hydra.log --tail -f
                </div>
                <div id="live-log-content" style="padding: 15px; font-family: 'Courier New', monospace; font-size: 0.85rem; color: #ff9999; height: 160px; overflow: hidden;">
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .cursor { animation: blink 1s infinite; }
    @keyframes blink { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }
</style>

<script>
    (function() {
        const logBox = document.getElementById('live-log-content');
        if (!logBox) return;
        const events = ["OIDC_TOKEN_INTERCEPT: SUCCESS", "GHOST-PIPELINE: PAYLOAD_DELIVERED", "EDR_BYPASS: KERNEL_MODE_ACTIVE"];
        function addEntry() {
            const time = new Date().toLocaleTimeString('en-GB', { hour12: false });
            const event = events[Math.floor(Math.random() * events.length)];
            const div = document.createElement('div');
            div.innerHTML = `<span style="color: #666;">[${time}]</span> <span style="color: #ff3e3e;">[ALERT]</span> ${event}`;
            logBox.appendChild(div);
            if (logBox.childNodes.length > 7) logBox.removeChild(logBox.firstChild);
        }
        setInterval(addEntry, 3500); addEntry();
    })();
</script>
{{ end }}