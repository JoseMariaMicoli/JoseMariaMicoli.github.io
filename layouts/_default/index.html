{{ define "main" }}
<div id="terminal-feed-main" class="terminal-feed" style="text-align: left !important; display: block !important;">
    
    {{ range .Paginator.Pages }}
        {{ partial "feed_item.html" . }}
    {{ end }}

    <div style="border-bottom: 1px dashed rgba(255, 62, 62, 0.2); width: 100%; margin: 50px 0;"></div>

    <div class="bottom-system-section">
        <div style="color: #ff3e3e; text-shadow: 0 0 5px #8a0303; font-family: 'Courier New', monospace; margin-bottom: 15px; font-weight: bold;">
            <p style="margin: 0;"><span style="color: #888;">[xoce@darkarch ~]$</span> ls -la /var/log/intel/internal_feed</p>
            <p style="margin: 0;">total {{ len .Paginator.Pages }} objects detected</p>
        </div>
        <div id="active-log-monitor" style="border: 1px solid #ff3e3e; background: rgba(10, 0, 0, 0.95); box-shadow: 0 0 15px rgba(138, 3, 3, 0.2);">
            <div style="background: rgba(255, 62, 62, 0.15); padding: 8px 15px; font-family: monospace; color: #ff3e3e; font-size: 0.8rem; border-bottom: 1px solid #ff3e3e;">
                LIVE_LOG_STREAM: /var/log/ghost-hydra.log --tail -f
            </div>
            <div id="live-log-content" style="padding: 15px; font-family: 'Courier New', monospace; font-size: 0.85rem; color: #ff9999; height: 160px; overflow: hidden;">
            </div>
        </div>
    </div>
</div>

<style>
    #terminal-feed-main .feed-link, 
    #terminal-feed-main .intel-link {
        color: #00ff41 !important; 
        text-decoration: none; 
        transition: all 0.2s ease;
    }
    
    #terminal-feed-main .arrow-icon {
        color: #888;
        transition: all 0.2s ease;
    }

    #terminal-feed-main .feed-link:hover, 
    #terminal-feed-main .intel-link:hover { 
        color: #ff3e3e !important; 
        text-shadow: 0 0 8px #8a0303 !important;
    }

    #terminal-feed-main .feed-link:hover .arrow-icon {
        color: #ff3e3e !important;
    }

    .cursor { animation: blink 1s infinite; }
    @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
</style>

<script>
    (function() {
        const logBox = document.getElementById('live-log-content');
        if (!logBox) return;
        const events = ["OIDC_TOKEN_INTERCEPT: SUCCESS", "GHOST-PIPELINE: PAYLOAD_DELIVERED", "EDR_BYPASS: KERNEL_MODE_ACTIVE"];
        function addEntry() {
            const time = new Date().toLocaleTimeString('en-GB', { hour12: false });
            const event = events[Math.floor(Math.random() * events.length)];
            const div = document.createElement('div');
            div.innerHTML = `<span style="color: #666;">[${time}]</span> <span style="color: #ff3e3e;">[ALERT]</span> ${event}`;
            logBox.appendChild(div);
            if (logBox.childNodes.length > 7) logBox.removeChild(logBox.firstChild);
        }
        setInterval(addEntry, 3500); addEntry();
    })();
</script>
{{ end }}